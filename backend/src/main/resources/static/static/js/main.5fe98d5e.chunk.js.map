{"version":3,"sources":["pages/utils.js","pages/ApprovalTemplate.jsx","pages/ApprovalList.jsx","App.js","reportWebVitals.js","index.js"],"names":["alert","message","dd","notification","title","buttonName","onSuccess","onFail","err","browserNavigator","u","navigator","userAgent","trident","indexOf","presto","webKit","gecko","mobile","match","ios","android","iPhone","iPad","Safari","DingTalk","toLowerCase","Windows","accountList","ApprovalTemplate","props","saveAproval","data","setState","loading","axios","post","domain","then","res","console","log","JSON","stringify","success","approvalName","errorMsg","catch","error","state","moneyFieldList","selectFieldName","dateFieldName","textFieldName","textFieldOpen","selectFieldOpen","dateFieldOpen","this","className","map","v","checked","onChange","e","oriArr","concat","list","value","target","push","filter","getCheckedList","disabled","placeholder","checkedChildren","unCheckedChildren","onClick","length","React","Component","approvalState","text","color","ApprovalList","getInstanceList","get","instanceList","processInstanceId","url","corpId","util","openLink","openSlidePanel","processTitle","createTime","style","processStatus","previewApproval","bind","RightOutlined","imageStyle","marginTop","description","display","pageList","name","key","App","authCode","userId","userName","userAvatar","page","navigation","setTitle","login","height","width","src","shape","backgroundColor","i","loginAction","_this","permission","requestAuthCode","code","setTimeout","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"6TAEaA,EAAQ,SAACC,GAClBC,SAAUC,aAAaH,MAAM,CACzBC,QAASA,EACTG,MAAO,eACPC,WAAY,eACZC,UAAY,aAIZC,OAAS,SAASC,QAwBbC,EACD,WACV,IAAIC,EAAIC,UAAUC,UAClB,MAAO,CACGC,QAASH,EAAEI,QAAQ,YAAc,EAC1CC,OAAQL,EAAEI,QAAQ,WAAa,EAC/BE,OAAQN,EAAEI,QAAQ,gBAAkB,EACpCG,MAAOP,EAAEI,QAAQ,UAAY,IAA4B,GAAvBJ,EAAEI,QAAQ,SAC5CI,SAAUR,EAAES,MAAM,yBAClBC,MAAOV,EAAES,MAAM,iCACfE,QAASX,EAAEI,QAAQ,YAAc,GAAKJ,EAAEI,QAAQ,UAAY,EAC5DQ,OAAQZ,EAAEI,QAAQ,WAAa,EAC/BS,KAAMb,EAAEI,QAAQ,SAAW,EAC3BU,QAAgC,GAAxBd,EAAEI,QAAQ,UAClBW,SAAUf,EAAEgB,cAAcZ,QAAQ,aAAe,EACjDa,QAASjB,EAAEgB,cAAcZ,QAAQ,YAAc,GAdtC,G,OC9BNc,EAAc,CAAC,iCAAS,qBAAO,iCAAS,4BA0N/BC,E,kDA5MX,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IAyLVC,YAAc,SAACC,GACX,EAAKC,SAAS,CAACC,SAAS,IACxBC,IAAMC,KAAK,EAAKN,MAAMO,OAAS,oBAAqBL,GACnDM,MAAK,SAAAC,GACF,EAAKN,SAAS,CAACC,SAAS,IACxBM,QAAQC,IAAIC,KAAKC,UAAUJ,IACvBA,EAAIP,KAAKY,SACT5C,EAAM,qBAAD,OAAOuC,EAAIP,KAAKA,KAAhB,6IACL,EAAKC,SAAS,CAACY,aAAcN,EAAIP,KAAKA,QAEtChC,EAAM,GAAD,OAAIuC,EAAIP,KAAKc,cAEvBC,OAAM,SAAAC,GACLR,QAAQC,IAAI,eAAiBC,KAAKC,UAAUK,QArMhD,EAAKC,MAAQ,CACTJ,aAAc,2BACdK,eAAgB,GAChBC,gBAAiB,eACjBC,cAAe,2BACfC,cAAe,eACfC,eAAe,EACfC,iBAAiB,EACjBC,eAAe,EACftB,SAAS,GAXE,E,0CAenB,WAAW,IAAD,OAEN,EAUIuB,KAAKR,MATLJ,EADJ,EACIA,aACAK,EAFJ,EAEIA,eACAC,EAHJ,EAGIA,gBACAC,EAJJ,EAIIA,cACAC,EALJ,EAKIA,cACAC,EANJ,EAMIA,cACAC,EAPJ,EAOIA,gBACAC,EARJ,EAQIA,cACAtB,EATJ,EASIA,QAGJ,OACI,sBAAKwB,UAAU,gBAAf,UAEQxB,EACA,qBAAKwB,UAAU,cAAf,SACI,cAAC,IAAD,MAEF,KAGN,sBAAKA,UAAU,wBAAf,UACI,sBAAKA,UAAU,gBAAf,UACI,sBAAMA,UAAU,sBAAhB,4CACA,sBAAMA,UAAU,sBAAhB,SACKb,OAGT,qBAAKa,UAAU,eAAf,sCAGA,sBAAKA,UAAU,qBAAf,UACI,sBAAKA,UAAU,qBAAf,UACI,sBAAMA,UAAU,sBAAhB,sCAGA,qBAAKA,UAAU,8BAAf,SAEQ9B,EAAY+B,KAAI,SAAAC,GACZ,OACI,qBAAaF,UAAU,yBAAvB,SACI,cAAC,IAAD,CACIG,QAASX,EAAepC,QAAQ8C,IAAM,EAAI,UAAY,GACtDE,SAAU,SAACC,GACP,IAAMC,EAASd,EAAee,SACxBC,EA1EvC,SAACH,EAAGI,EAAOD,GAM9B,OALIH,EAAEK,OAAOP,QACTK,EAAKG,KAAKF,GAEVD,EAAOA,EAAKI,QAAO,SAAAV,GAAC,OAAIA,IAAMO,KAE3BD,EAoE0DK,CAAeR,EAAGH,EAAGI,GAClC,EAAK/B,SAAS,CAACiB,eAAgBgB,KALvC,SAQKN,KATCA,WAiB9B,sBAAKF,UAAU,qCAAf,UACI,cAAC,IAAD,CACIc,UAAWjB,EACXG,UAAU,6BACVe,YAAY,6CACZN,MAAOhB,EACPW,SAAU,SAACC,GACP,EAAK9B,SAAS,CAACkB,gBAAiBY,EAAEK,OAAOD,WAGjD,sBAAMT,UAAU,6BAAhB,gCACA,cAAC,IAAD,CACIgB,gBAAgB,eAChBC,kBAAkB,eAClBd,QAASN,EACTO,SAAU,SAACD,GACP,EAAK5B,SAAS,CAACsB,gBAAiBM,UAI5C,sBAAKH,UAAU,qCAAf,UACI,cAAC,IAAD,CACIc,UAAWhB,EACXE,UAAU,6BACVe,YAAY,6CACZN,MAAOf,EACPU,SAAU,SAACC,GACP,EAAK9B,SAAS,CAACmB,cAAeW,EAAEK,OAAOD,WAG/C,sBAAMT,UAAU,6BAAhB,0BACA,cAAC,IAAD,CACIgB,gBAAgB,eAChBC,kBAAkB,eAClBd,QAASL,EACTM,SAAU,SAACD,GACP,EAAK5B,SAAS,CAACuB,cAAeK,UAI1C,sBAAKH,UAAU,qCAAf,UACI,cAAC,IAAD,CACIc,UAAWlB,EACXI,UAAU,6BACVe,YAAY,6CACZN,MAAOd,EACPS,SAAU,SAACC,GACP,EAAK9B,SAAS,CAACoB,cAAeU,EAAEK,OAAOD,WAG/C,sBAAMT,UAAU,6BAAhB,4CACA,cAAC,IAAD,CACIgB,gBAAgB,eAChBC,kBAAkB,eAClBd,QAASP,EACTQ,SAAU,SAACD,GACP,EAAK5B,SAAS,CAACqB,cAAeO,gBAMlD,qBAAKH,UAAU,kBAAf,SACI,qBACIA,UAAU,sBACVkB,QAAS,WAGL,IAAK1B,EAAe2B,OAChB,OAAO7E,EAAM,gEAGjB,GAAIuD,IAAoBJ,EACpB,OAAOnD,EAAM,gEACV,GAAImD,EAAgB0B,OAAS,GAChC,OAAO7E,EAAM,gGAGjB,GAAIwD,IAAkBJ,EAClB,OAAOpD,EAAM,0DACV,GAAIoD,EAAcyB,OAAS,GAC9B,OAAO7E,EAAM,0FAGjB,GAAIsD,IAAkBD,EAClB,OAAOrD,EAAM,4EACV,GAAIqD,EAAcwB,OAAS,GAC9B,OAAO7E,EAAM,4GAGjB,IAAMgC,EAAO,CACTkB,iBACAK,kBACAJ,kBACAK,gBACAJ,gBACAE,gBACAD,iBAGJ,EAAKtB,YAAYC,IArCzB,+C,GA5IW8C,IAAMC,W,iBCZ/BC,EAAgB,CAClB,MAAS,CAACC,KAAK,qBAAOC,MAAO,WAC7B,MAAS,CAAED,KAAM,eAAMC,MAAO,WAC9B,OAAU,CAAED,KAAM,eAAMC,MAAO,WAC/B,UAAa,CAAED,KAAM,eAAMC,MAAO,WAClC,OAAU,CAAED,KAAM,eAAMC,MAAO,WAC/B,OAAU,CAAED,KAAM,eAAMC,MAAO,YAG7BC,E,kDAEF,WAAYrD,GAAQ,IAAD,8BACf,cAAMA,IA6EVsD,gBAAkB,WACdjD,IAAMkD,IAAI,EAAKvD,MAAMO,OAAS,sBAC7BC,MAAK,SAAAC,GACFC,QAAQC,IAAIC,KAAKC,UAAUJ,IACvBA,EAAIP,KAAKY,QACT,EAAKX,SAAS,CAACqD,aAAc/C,EAAIP,KAAKA,OAEtChC,EAAM,GAAD,OAAIuC,EAAIP,KAAKc,cAEvBC,OAAM,SAAAC,GACLR,QAAQC,IAAI,eAAiBC,KAAKC,UAAUK,QAtFhD,EAAKC,MAAQ,CACTqC,aAAc,IAHH,E,qDAMnB,WACI7B,KAAK2B,oB,6BAGT,SAAiBG,GACb,IAAMC,EAAG,oIAAgI/B,KAAK3B,MAAM2D,OAA3I,WAA4J,MAA5J,iCAA0LF,GAE/L9E,EAA0BS,QAAUT,EAA0BW,KAAOX,EAA0BY,SAAWZ,EAA0Ba,QAAUb,EAA0Bc,KFd5J,SAACiE,GACrBtF,MAAOwF,KAAKC,SAAS,CACjBH,IAAKA,EACLlF,UAAW,aACXC,OAAQ,eEWJoF,CAASH,GFNS,SAACA,GAAwB,IAAnBpF,EAAkB,uDAAZ,QACzCF,MAAOwF,KAAKE,eAAe,CAE1BJ,IAAKA,EACLpF,QACAE,UAAW,aACLC,OAAQ,eEEJqF,CAAeJ,EAAK,8B,oBAK5B,WAAW,IAAD,OACN,OACI,sBAAK9B,UAAU,gBAAf,UACI,sBAAKA,UAAU,wBAAf,UACI,qBAAKA,UAAU,qBAAf,SAEQD,KAAKR,MAAMqC,aAAa3B,KAAI,SAAAC,GACxB,OACI,sBAAKF,UAAU,qBAAf,UACI,sBAAKA,UAAU,0BAAf,UACI,sBAAMA,UAAU,0BAAhB,SAA2CE,EAAEiC,eAC7C,sBAAMnC,UAAU,0BAAhB,SAA2CE,EAAEkC,gBAEjD,sBAAKpC,UAAU,0BAAf,UACI,sBAAMA,UAAU,2BAA2BqC,MAAO,CAACb,MAAOF,EAAcpB,EAAEoC,eAAed,OAAzF,SAAkGF,EAAcpB,EAAEoC,eAAef,OACjI,uBACIvB,UAAU,0BACVkB,QAAS,EAAKqB,gBAAgBC,KAAK,EAAMtC,EAAE2B,mBAF/C,sCAIS,cAACY,EAAA,EAAD,YAXwBvC,EAAE2B,wBAoBtD9B,KAAKR,MAAMqC,aAAaT,OAQvB,KAPF,cAAC,IAAD,CACIuB,WAAY,CAACC,UAAW,QACxBC,YAAa,sBAAK5C,UAAU,yBAAf,UACT,yFACA,2IAKZ,qBAAKA,UAAU,oBAAoBqC,MAAO,CAACQ,QAAS9C,KAAKR,MAAMqC,aAAaT,OAAS,GAAK,QAA1F,gHAIJ,qBAAKnB,UAAU,kBAAf,SACI,qBACIA,UAAU,sBACVkB,QAAS,WACL,EAAKQ,mBAHb,+C,GAlEON,IAAMC,WA+FlBI,ICnGTqB,EAAW,CAAC,CAACC,KAAM,2BAAQC,IAAK,QAAS,CAACD,KAAM,2BAAQC,IAAK,SAkIpDC,E,kDA/HX,WAAY7E,GAAQ,IAAD,8BACf,cAAMA,IACDmB,MAAQ,CAITZ,OAAQ,GACRoD,OAAQ,GACRmB,SAAU,GACVC,OAAQ,GACRC,SAAU,GACVC,WAAY,GAEZC,KAAM,QAbK,E,qDAgBnB,WACQrG,UAAUC,UAAUc,cAAcZ,QAAQ,aAAe,GACzDZ,MAAO+G,WAAWC,SAAS,CAAE9G,MAAO,mC,oBAI5C,WAAU,IAAD,OAEL,EAA6CqD,KAAKR,MAA1CZ,EAAR,EAAQA,OAAQoD,EAAhB,EAAgBA,OAAQuB,EAAxB,EAAwBA,KAAMD,EAA9B,EAA8BA,WAM9B,MAJ0B,KAAtBtD,KAAKR,MAAM4D,QAEXpD,KAAK0D,QAGL,sBAAKzD,UAAU,WAAf,UACI,qBAAKA,UAAU,eAAf,SACI,sBAAKA,UAAU,kBAAf,UAEQqD,EACA,qBAAKhB,MAAO,CAAEqB,OAAQ,OAAQC,MAAO,QAASC,IAAKP,IAEnD,cAAC,IAAD,CAAQQ,MAAM,SAASxB,MAAO,CAAEyB,gBAAiB,UAAWJ,OAAQ,OAAQC,MAAO,UAEvF,qBAAK3D,UAAU,qBAEX8C,EAAS7C,KAAI,SAACC,EAAG6D,GACb,OACI,qBAEI/D,UAAWsD,IAASpD,EAAE8C,IAAM,gCAAkC,eAC9D9B,QAAS,WACL,EAAK3C,SAAS,CAAC+E,KAAMpD,EAAE8C,OAJ/B,SAQK9C,EAAE6C,MAPE7C,EAAE8C,aAelB,SAATM,EACA,cAAC,EAAD,CACI3E,OAAQA,EACRoD,OAAQA,IAGZ,cAAC,EAAD,CACIpD,OAAQA,EACRoD,OAAQA,S,mBAQ5B,WAAS,IAAD,OACJtD,IAAMkD,IAAI5B,KAAKR,MAAMZ,OAAS,cACzBC,MAAK,SAAAC,GACFC,QAAQC,IAAIC,KAAKC,UAAUJ,IACvBA,EAAIP,MACJ,EAAK0F,YAAYnF,EAAIP,KAAKA,SAE/Be,OAAM,SAAAC,GACLR,QAAQC,IAAI,eAAiBC,KAAKC,UAAUK,S,yBAKxD,SAAYyC,GACRjD,QAAQC,IAAI,WAAcgD,GAC1B,IAAIkC,EAAQlE,KACZvD,UAAW0H,WAAWC,gBAAgB,CAClCpC,OAAQA,EACRnF,UAAW,SAAUiC,GAEjBoF,EAAM1E,MAAM2D,SAAWrE,EAAIuF,KAC3B3F,IAAMkD,IAAIsC,EAAM1E,MAAMZ,OAAS,mBAAqBsF,EAAM1E,MAAM2D,UAC9DtE,MAAK,SAAAC,GACH,GAAIA,GAAOA,EAAIP,KAAKY,QAAS,CACzB,IAAIiE,EAAStE,EAAIP,KAAKA,KAAK6E,OACvBC,EAAWvE,EAAIP,KAAKA,KAAK8E,SACzBC,EAAaxE,EAAIP,KAAKA,KAAK+E,WAC/B/G,MAAM,6CAAY8G,GAClBiB,YAAW,WACPJ,EAAM1F,SAAS,CACX4E,OAAQA,EACRC,SAAUA,EACVrB,OAAQA,EACRsB,WAAYA,MAEjB,QAEHvE,QAAQC,IAAI,uBAAsBC,KAAKC,UAAUJ,OAEtDQ,OAAM,SAAAC,GACLR,QAAQC,IAAI,6BAA4BC,KAAKC,UAAUK,QAG/DzC,OAAQ,SAAUC,GAEdgC,QAAQC,IAAI,iCAAgCC,KAAKC,UAAUnC,W,GA1HzDsE,IAAMC,WCDTiD,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqB5F,MAAK,YAAkD,IAA/C6F,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1BZ,M","file":"static/js/main.5fe98d5e.chunk.js","sourcesContent":["import * as dd from \"dingtalk-jsapi\";\n\nexport const alert = (message) => {\n    dd.device.notification.alert({\n        message: message,\n        title: \"提示\", //可传空\n        buttonName: \"确定\",\n        onSuccess : function() {\n            //onSuccess将在点击button之后回调\n            /*回调*/\n        },\n        onFail : function(err) {\n            // \n        }\n    });\n}\nexport const openLink = (url) => {\n    dd.biz.util.openLink({\n        url: url,\n        onSuccess: function() {},\n        onFail: function() {}\n    });\n}\n\n\nexport const openSlidePanel = (url, title='title') => {\n\tdd.biz.util.openSlidePanel({\n\t\t// url: 'https://desktop.xfannix.com/index.html#' + url,\n\t\turl: url,\n\t\ttitle,\n\t\tonSuccess: function() {},\n        onFail: function() {}\n\t})\n}\n\nexport const browserNavigator = {\n\tversions: (() => {\n\t\tvar u = navigator.userAgent\n\t\treturn {\n            trident: u.indexOf('Trident') > -1, //IE内核\n\t\t\tpresto: u.indexOf('Presto') > -1, //opera内核\n\t\t\twebKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核\n\t\t\tgecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核\n\t\t\tmobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端\n\t\t\tios: !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端\n\t\t\tandroid: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器\n\t\t\tiPhone: u.indexOf('iPhone') > -1, //是否为iPhone或者QQHD浏览器\n\t\t\tiPad: u.indexOf('iPad') > -1, //是否iPad\n\t\t\tSafari: u.indexOf('Safari') == -1, //是否webApp程序，没有头部与底部\n\t\t\tDingTalk: u.toLowerCase().indexOf('dingtalk') > -1,\n\t\t\tWindows: u.toLowerCase().indexOf('windows') > -1,\n\t\t}\n\t})()\n}","import axios from 'axios';\nimport React from 'react';\nimport { Input, Switch, Checkbox, Spin } from 'antd'\nimport { alert } from './utils'\n\n// 收款账户列表\nconst accountList = ['支付宝商家', '二维火', '饿了么外卖', '美团外卖']\n\n// 收款账户 勾选 与 勾除\nconst getCheckedList = (e, value, list) => {\n    if (e.target.checked) { // 勾选\n        list.push(value)\n    } else { // 勾除\n        list = list.filter(v => v !== value)\n    }\n    return list\n}\n\nclass ApprovalTemplate extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            approvalName: '收入日报',\n            moneyFieldList: [],\n            selectFieldName: '门店',\n            dateFieldName: '收款日期',\n            textFieldName: '备注',\n            textFieldOpen: true,\n            selectFieldOpen: true,\n            dateFieldOpen: true,\n            loading: false,\n        } \n    }\n\n    render () {\n\n        const {\n            approvalName,\n            moneyFieldList,\n            selectFieldName,\n            dateFieldName,\n            textFieldName,\n            textFieldOpen,\n            selectFieldOpen,\n            dateFieldOpen,\n            loading\n        } = this.state\n\n        return (\n            <div className='approval-body'>\n                {\n                    loading ?\n                    <div className='app-loading'>\n                        <Spin />\n                    </div>\n                    : null\n                }\n                \n                <div className='approval-contain-wrap'>\n                    <div className='approval-line'>\n                        <span className='approval-line-label'>审批名称：</span>\n                        <span className='approval-line-input'>\n                            {approvalName}\n                        </span>\n                    </div>\n                    <div className='approval-tip'> \n                        表单设置\n                    </div>\n                    <div className='approval-form-wrap'>\n                        <div className='approval-miti-line'>\n                            <span className='approval-miti-label'>\n                                收款账户\n                            </span>\n                            <div className='approval-miti-checkbox-wrap'>\n                                {\n                                    accountList.map(v => {\n                                        return (\n                                            <div key={v} className='approval-miti-checkbox'>\n                                                <Checkbox\n                                                    checked={moneyFieldList.indexOf(v) > -1 ? \"checked\" : ''}\n                                                    onChange={(e) => {\n                                                        const oriArr = moneyFieldList.concat() \n                                                        const list = getCheckedList(e, v, oriArr)\n                                                        this.setState({moneyFieldList: list})\n                                                    }}\n                                                >\n                                                    {v}\n                                                </Checkbox>\n                                            </div>\n                                        )\n                                    })\n                                }\n                            </div>\n                        </div>\n                        <div className='approval-line approval-line-border'>\n                            <Input\n                                disabled={!selectFieldOpen}\n                                className='approval-line-switch-input'\n                                placeholder='请输入组件标题'\n                                value={selectFieldName}\n                                onChange={(e) => {\n                                    this.setState({selectFieldName: e.target.value})\n                                }}\n                            />\n                            <span className='approval-line-switch-label'>单选框</span>\n                            <Switch\n                                checkedChildren=\"开启\"\n                                unCheckedChildren=\"关闭\"\n                                checked={selectFieldOpen}\n                                onChange={(checked) => {\n                                    this.setState({selectFieldOpen: checked})\n                                }}\n                            />\n                        </div>\n                        <div className='approval-line approval-line-border'>\n                            <Input\n                                disabled={!dateFieldOpen}\n                                className='approval-line-switch-input'\n                                placeholder='请输入组件标题'\n                                value={dateFieldName}\n                                onChange={(e) => {\n                                    this.setState({dateFieldName: e.target.value})\n                                }}\n                            />\n                            <span className='approval-line-switch-label'>日期</span>\n                            <Switch\n                                checkedChildren=\"开启\"\n                                unCheckedChildren=\"关闭\"\n                                checked={dateFieldOpen}\n                                onChange={(checked) => {\n                                    this.setState({dateFieldOpen: checked})\n                                }}\n                            />\n                        </div>\n                        <div className='approval-line approval-line-border'>\n                            <Input\n                                disabled={!textFieldOpen}\n                                className='approval-line-switch-input'\n                                placeholder='请输入组件标题'\n                                value={textFieldName}\n                                onChange={(e) => {\n                                    this.setState({textFieldName: e.target.value})\n                                }}\n                            />\n                            <span className='approval-line-switch-label'>单行输入框</span>\n                            <Switch\n                                checkedChildren=\"开启\"\n                                unCheckedChildren=\"关闭\"\n                                checked={textFieldOpen}\n                                onChange={(checked) => {\n                                    this.setState({textFieldOpen: checked})\n                                }}\n                            />\n                        </div>\n                    </div>\n                </div>\n                <div className='approval-footer'>\n                    <div\n                        className='approval-footer-btn'\n                        onClick={() => {\n\n                            // 收款账户校验\n                            if (!moneyFieldList.length) {\n                                return alert('收款账户至少勾选一个')\n                            }\n                            // 单选框组件校验\n                            if (selectFieldOpen && !selectFieldName ) {\n                                return alert('单选框组件的名称必填')\n                            } else if (selectFieldName.length > 16) {\n                                return alert('单选框组件的名称不能超过16个字符')\n                            }\n                            // 日期组件校验\n                            if (dateFieldOpen && !dateFieldName) {\n                                return alert('日期组件的名称必填')\n                            } else if (dateFieldName.length > 16) {\n                                return alert('日期组件的名称不能超过16个字符')\n                            }\n                            // 单行输入框组件校验\n                            if (textFieldOpen && !textFieldName) {\n                                return alert('单行输入框组件的名称必填')\n                            } else if (textFieldName.length > 16) {\n                                return alert('单行输入框组件的名称不能超过16个字符')\n                            }\n    \n                            const data = {\n                                moneyFieldList,\n                                selectFieldOpen,\n                                selectFieldName,\n                                dateFieldOpen,\n                                dateFieldName,\n                                textFieldOpen,\n                                textFieldName\n                            }\n    \n                            this.saveAproval(data)\n                        }}\n                    >\n                        新增模版\n                    </div> \n                </div>\n            </div>\n        )\n    }\n\n    // 新增模版\n    saveAproval = (data) => {\n        this.setState({loading: true})\n        axios.post(this.props.domain + \"/biz/create/model\", data)\n        .then(res => {\n            this.setState({loading: false})\n            console.log(JSON.stringify(res));\n            if (res.data.success) {\n                alert(`模版【${res.data.data}】创建成功！请前往 「工作台」-「OA审批」发起审批`)\n                this.setState({approvalName: res.data.data})\n            } else {\n                alert(`${res.data.errorMsg}`)\n            }\n        }).catch(error => {\n            console.log(\"corpId err, \" + JSON.stringify(error))\n        })\n    } \n}\n\nexport default ApprovalTemplate;","import axios from 'axios';\nimport React from 'react';\nimport { Empty, } from 'antd';\nimport { RightOutlined } from '@ant-design/icons'\nimport { openLink, openSlidePanel, alert, browserNavigator } from './utils'\n\nconst approvalState = {\n    'start': {text:'进行中', color: '#E8A54C'},\n    'agree': { text: '完成', color: '#17C295'},\n    'refuse': { text: '拒绝', color: '#F2725E'},\n    'terminate': { text: '撤销', color: '#666666'},\n    'delete': { text: '删除', color: '#666666'},\n    'cancel': { text: '取消', color: '#666666'},\n}\n\nclass ApprovalList extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            instanceList: [],\n        } \n    }\n    componentDidMount() {\n        this.getInstanceList()\n    }\n\n    previewApproval (processInstanceId) {\n        const url = `https://aflow.dingtalk.com/dingtalk/mobile/homepage.htm?dd_share=false&showmenu=true&dd_progress=false&back=native&corpid=${this.props.corpId}&swfrom=${'XFN'}#/approval?procInstId=${processInstanceId}`\n        \n        if (browserNavigator.versions.mobile || browserNavigator.versions.ios || browserNavigator.versions.android || browserNavigator.versions.iPhone || browserNavigator.versions.iPad) {\n            openLink(url);\n        } else {\n            openSlidePanel(url, '查看审批')\n        }\n        \n    }\n\n    render () {\n        return (\n            <div className='approval-body'>\n                <div className='approval-contain-wrap'>\n                    <div className='approval-list-wrap'>\n                        {\n                            this.state.instanceList.map(v => {\n                                return (\n                                    <div className='approval-list-item' key={v.processInstanceId}>\n                                        <div className='approval-list-item-line'>\n                                            <span className='approval-list-item-name'>{v.processTitle}</span>\n                                            <span className='approval-list-item-date'>{v.createTime}</span>\n                                        </div>\n                                        <div className='approval-list-item-line'>\n                                            <span className='approval-list-item-state' style={{color: approvalState[v.processStatus].color}}>{approvalState[v.processStatus].text}</span>\n                                            <span\n                                                className='approval-list-item-link'\n                                                onClick={this.previewApproval.bind(this, v.processInstanceId)}\n                                            >\n                                                查看详情 <RightOutlined />\n                                            </span>\n                                        </div>\n                                    </div>\n                                )\n                            })\n                        }\n                    </div>\n                    {\n                        !this.state.instanceList.length ?\n                        <Empty\n                            imageStyle={{marginTop: '80px'}}\n                            description={<div className='approval-list-none-tip'>\n                                <div>还没有审批实例数据</div>\n                                <div>请前往「工作台」-「OA审批」发起审批</div>\n                            </div>}\n                        />\n                        : null\n                    }\n                    <div className='approval-list-tip' style={{display: this.state.instanceList.length ? '' : 'none'}}>\n                        *仅显示当次运行demo时发起的审批实例\n                    </div>\n                </div>\n                <div className='approval-footer'>\n                    <div\n                        className='approval-footer-btn' \n                        onClick={() => {\n                            this.getInstanceList()\n                        }}\n                    >\n                        刷新列表\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    // 获取审批列表\n    getInstanceList = () => {\n        axios.get(this.props.domain + \"/biz/list/instance\")\n        .then(res => {\n            console.log(JSON.stringify(res));\n            if (res.data.success) {\n                this.setState({instanceList: res.data.data})\n            } else {\n                alert(`${res.data.errorMsg}`)\n            }\n        }).catch(error => {\n            console.log(\"corpId err, \" + JSON.stringify(error))\n        })\n    }\n}\n\nexport default ApprovalList;","import axios from 'axios';\nimport React from 'react';\nimport './App.css';\nimport 'antd/dist/antd.css';\nimport * as dd from \"dingtalk-jsapi\";\n\nimport { Avatar } from 'antd';\n\nimport ApprovalTemplate from './pages/ApprovalTemplate'\nimport ApprovalList from './pages/ApprovalList'\n\nconst pageList = [{name: '配置模版', key: 'temp'}, {name: '审批数据', key: 'list'}]\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            //内网穿透工具介绍:\n            // https://developers.dingtalk.com/document/resourcedownload/http-intranet-penetration?pnamespace=app\n            // domain: \"\",\n            domain: '',\n            corpId: '',\n            authCode: '',\n            userId: '',\n            userName: '',\n            userAvatar: '',\n            \n            page: 'temp' // 两个页面： 配置模版：’temp‘  审批数据：’list‘\n        } \n    }\n    componentDidMount() {\n        if (navigator.userAgent.toLowerCase().indexOf('dingtalk') > -1) {\n            dd.biz.navigation.setTitle({ title: '收入日报demo' })\n        }\n    }\n\n    render() {\n\n        const { domain, corpId, page, userAvatar } = this.state\n        \n        if (this.state.userId === '') {\n            // 免登操作\n            this.login();\n        }\n        return (\n            <div className='app-wrap'>\n                <div className='app-tit-wrap'>\n                    <div className='app-tit-contain'>\n                        {\n                            userAvatar ? \n                            <img style={{ height: '20px', width: '20px'}} src={userAvatar} />\n                            :\n                            <Avatar shape=\"square\" style={{ backgroundColor: '#0089FF', height: '20px', width: '20px'}} />\n                        }\n                        <div className='app-tit-separate'></div>\n                        {\n                            pageList.map((v, i) => { \n                                return (\n                                    <div\n                                        key={v.key}\n                                        className={page === v.key ? 'app-tit-item app-tit-item-cur' : 'app-tit-item'}\n                                        onClick={() => {\n                                            this.setState({page: v.key})\n                                        }}\n                                    >\n\n                                        {v.name}\n                                    </div>\n                                )\n                            })\n                        }\n                    </div>\n                </div>\n                {\n                    page === 'temp' ? \n                    <ApprovalTemplate\n                        domain={domain}\n                        corpId={corpId}\n                    />\n                    :\n                    <ApprovalList\n                        domain={domain}\n                        corpId={corpId}\n                    />\n                }    \n            </div>\n        );\n    }\n\n    //登录-获取corpId\n    login() {\n        axios.get(this.state.domain + \"/getCorpId\")\n            .then(res => {\n                console.log(JSON.stringify(res));\n                if (res.data) {\n                    this.loginAction(res.data.data);\n                }\n            }).catch(error => {\n                console.log(\"corpId err, \" + JSON.stringify(error))\n            })     \n    }\n\n    //登录操作\n    loginAction(corpId) {\n        console.log(\"corpId: \" +  corpId);\n        let _this = this;\n        dd.runtime.permission.requestAuthCode({\n            corpId: corpId,//企业 corpId\n            onSuccess: function (res) {\n                // 调用成功时回调\n                _this.state.authCode = res.code\n                axios.get(_this.state.domain + \"/login?authCode=\" + _this.state.authCode\n                ).then(res => {\n                    if (res && res.data.success) {\n                        let userId = res.data.data.userId;\n                        let userName = res.data.data.userName;\n                        let userAvatar = res.data.data.userAvatar;\n                        alert('登录成功，你好' + userName);\n                        setTimeout(function () {\n                            _this.setState({\n                                userId: userId,\n                                userName: userName,\n                                corpId: corpId,\n                                userAvatar: userAvatar,\n                            })\n                        }, 0)\n                    } else {\n                        console.log(\"login failed --->\" + JSON.stringify(res));\n                    }\n                }).catch(error => {\n                    console.log(\"httpRequest failed --->\" + JSON.stringify(error))\n                })\n            },\n            onFail: function (err) {\n                // 调用失败时回调\n                console.log(\"requestAuthCode failed --->\" + JSON.stringify(err))\n            }\n        });\n    }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}